"use strict";const button=document.querySelector(".js-search-button");let resultsSearch=document.querySelector(".js-search-input");const containerCardsSeries=document.querySelector(".js-ul-list-of-series"),containerFavorites=document.querySelector(".js-container__favorite-series");let showsList;const paintCard=(e,s,t,i)=>{containerCardsSeries.innerHTML+=` \n    <li id = ${t} class="js-li-results ${i}">\n    <div class="js-info-of-my-serie info-of-my-serie">\n    <img class="image card" src="${e}" alt=""\n      <h3 class="js-name-series"> ${s}</h3>\n    </div>\n  </li>`},paintAllCards=()=>{containerCardsSeries.innerHTML="";for(let e=0;e<showsList.length;e++)null===showsList[e].show.image?paintCard("//via.placeholder.com/210x295/ffffff/666666/?\n              text=TV.",showsList[e].show.name,e):paintCard(showsList[e].show.image.medium,showsList[e].show.name,e)},paintAllCardsWithFavoriteCssClass=()=>{containerCardsSeries.innerHTML="";let e=JSON.parse(localStorage.getItem("listOfMyFavorite"));for(let s=0;s<showsList.length;s++){let t="";for(let i=0;i<e.length;i++)showsList[s].show.name===e[i].show.name&&(t="red");null===showsList[s].show.image?paintCard("//via.placeholder.com/210x295/ffffff/666666/?\n              text=TV.",showsList[s].show.name,s,t):paintCard(showsList[s].show.image.medium,showsList[s].show.name,s,t)}},paintFavoriteCard=(e,s,t)=>{containerFavorites.innerHTML+=` <li id=${t} class="js-results js-font">\n    <div class="js-info-of-my-serie info-of-my-serie js-width-info-of-my-serie">\n    <img class="image-card js-width-image" src="${e}" alt="imagen"\n      <h3 class="js-name-series js-width-h3"> ${s}</h3>\n    </div>\n    </li>`},paintAllFavorites=()=>{containerFavorites.innerHTML="";let e=JSON.parse(localStorage.getItem("listOfMyFavorite"));if(null!==e)for(let o=0;o<e.length;o++)s=e[o].show.image.medium,t=e[o].show.name,i=o,containerFavorites.innerHTML+=` <li id=${i} class="js-results js-font">\n    <div class="js-info-of-my-serie info-of-my-serie js-width-info-of-my-serie">\n    <img class="image-card js-width-image" src="${s}" alt="imagen"\n      <h3 class="js-name-series js-width-h3"> ${t}</h3>\n    </div>\n    </li>`;var s,t,i},searchResultFromApi=()=>{fetch("//api.tvmaze.com/search/shows?q="+resultsSearch.value).then(e=>e.json()).then(e=>{showsList=e,null!==JSON.parse(localStorage.getItem("listOfMyFavorite"))?paintAllCardsWithFavoriteCssClass():paintAllCards(),assignListener()})};button.addEventListener("click",searchResultFromApi);const addFavoriteSeriesFromLocalStorage=e=>{let s=e.currentTarget,t=e.currentTarget.id;console.log("myFavorite",t);let i=showsList[t];s.classList.add("red");let o=[],a=localStorage.getItem("listOfMyFavorite"),l=!1;if(0===o.length&&null===a)o.push(i),console.log("entro en el else");else if(null!==a){let e;console.log("entro en el if"),o=JSON.parse(a),console.log("objeto clicado desde la api",i.show.id),console.log(" myFavoriteId",t),console.log("listOfMyFavoriteArray.length",o.length);for(let s=0;s<o.length;s++){if(o[s].show.id===i.show.id){e=s,l=!0;break}l=!1,console.log("metelo")}console.log("i",e),!0===l?o.splice(e,1):o.push(i)}console.log("listOfMyFavoriteArray",o),localStorage.setItem("listOfMyFavorite",JSON.stringify(o)),paintAllFavorites()},assignListener=()=>{let e=document.querySelectorAll(".js-li-results");for(let s=0;s<e.length;s++)e[s].addEventListener("click",addFavoriteSeriesFromLocalStorage)};paintAllFavorites();