"use strict";const button=document.querySelector(".js-search-button");let resultsSearch=document.querySelector(".js-search-input");const containerCardsSeries=document.querySelector(".js-ul-list-of-series"),containerFavorites=document.querySelector(".js-container__favorite-series");let showsList;const paintCard=(e,s,t,o)=>{containerCardsSeries.innerHTML+=` \n    <li id = ${t} class="js-li-results ${o}">\n    <div class="js-info-of-my-serie info-of-my-serie">\n    <img class="image card" src="${e}" alt=""\n      <h3 class="js-name-series"> ${s}</h3>\n    </div>\n  </li>`},paintAllCards=()=>{containerCardsSeries.innerHTML="";for(let e=0;e<showsList.length;e++)null===showsList[e].show.image?paintCard("//via.placeholder.com/210x295/ffffff/666666/?\n              text=TV.",showsList[e].show.name,e):paintCard(showsList[e].show.image.medium,showsList[e].show.name,e)},paintAllCardsWithFavoriteCssClass=()=>{containerCardsSeries.innerHTML="";let e=JSON.parse(localStorage.getItem("listOfMyFavorite"));for(let s=0;s<showsList.length;s++){let t="";for(let o=0;o<e.length;o++)showsList[s].show.name===e[o].show.name&&(t="red");null===showsList[s].show.image?paintCard("//via.placeholder.com/210x295/ffffff/666666/?\n              text=TV.",showsList[s].show.name,s,t):paintCard(showsList[s].show.image.medium,showsList[s].show.name,s,t)}},paintFavoriteCard=(e,s,t,o)=>{containerFavorites.innerHTML+=`<form action="">\n  <li id=${t} class="js-results js-font">\n    <input type="checkbox" name="remove" id="${o}" class="button-remove js-button-remove"/>\n    <div class="js-info-of-my-serie info-of-my-serie js-width-info-of-my-serie">\n    <img class="image-card js-width-image" src="${e}" alt="imagen">\n      <h4 class="js-name-series js-width-h3"> ${s}</h4>\n    </li>\n</form>`},paintAllFavorites=()=>{containerFavorites.innerHTML="";let e=JSON.parse(localStorage.getItem("listOfMyFavorite"));if(null!==e)for(let n=0;n<e.length;n++)s=e[n].show.image.medium,t=e[n].show.name,o=n,i=e[n].show.id,containerFavorites.innerHTML+=`<form action="">\n  <li id=${o} class="js-results js-font">\n    <input type="checkbox" name="remove" id="${i}" class="button-remove js-button-remove"/>\n    <div class="js-info-of-my-serie info-of-my-serie js-width-info-of-my-serie">\n    <img class="image-card js-width-image" src="${s}" alt="imagen">\n      <h4 class="js-name-series js-width-h3"> ${t}</h4>\n    </li>\n</form>`;var s,t,o,i;assignListenerToRemove()},searchResultFromApi=()=>{fetch("//api.tvmaze.com/search/shows?q="+resultsSearch.value).then(e=>e.json()).then(e=>{showsList=e,null!==JSON.parse(localStorage.getItem("listOfMyFavorite"))?paintAllCardsWithFavoriteCssClass():paintAllCards(),assignListener()})};button.addEventListener("click",searchResultFromApi);const addFavoriteSeriesFromLocalStorage=e=>{let s=e.currentTarget,t=e.currentTarget.id;console.log("myFavorite",t);let o=showsList[t];s.classList.add("red");let i=[],n=localStorage.getItem("listOfMyFavorite"),r=!1;if(0===i.length&&null===n)i.push(o),console.log("entro en el else");else if(null!==n){let e;console.log("entro en el if"),i=JSON.parse(n),console.log("objeto clicado desde la api",o.show.id),console.log(" myFavoriteId",t),console.log("listOfMyFavoriteArray.length",i.length);for(let s=0;s<i.length;s++){if(i[s].show.id===o.show.id){e=s,r=!0;break}r=!1,console.log("metelo")}console.log("i",e),!0===r?(i.splice(e,1),s.classList.remove("red")):i.push(o)}console.log("listOfMyFavoriteArray",i),localStorage.setItem("listOfMyFavorite",JSON.stringify(i)),paintAllFavorites(),assignListenerToRemove()},removeFavorite=e=>{const s=e.currentTarget;console.log("notAFavorite click",s);const t=e.currentTarget.id;console.log("notAFavorite",t);const o=JSON.parse(localStorage.getItem("listOfMyFavorite")),i=o.findIndex(e=>(console.log("element",e.show),e.show.id===parseInt(t)));console.log("myElementIndex",i),o.splice(i,1),localStorage.setItem("listOfMyFavorite",JSON.stringify(o)),paintAllFavorites(),paintAllCardsWithFavoriteCssClass(),assignListenerToRemove(),assignListener()},assignListener=()=>{let e=document.querySelectorAll(".js-li-results");for(let s=0;s<e.length;s++)e[s].addEventListener("click",addFavoriteSeriesFromLocalStorage)},assignListenerToRemove=()=>{let e=document.querySelectorAll(".js-button-remove");for(const s of e)s.addEventListener("click",removeFavorite),console.log("asigna escucha")};paintAllFavorites(),assignListenerToRemove();